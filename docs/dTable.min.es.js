const t=t=>{if(t){let e="<thead><tr>";return t.forEach(((t,a)=>{t.index=a;let l=t.filterable?'<span data-role="search"> </span><input data-role="d-search" type="text" autofocus style="display:none">':"";e+=`<th data-index="${a}" title="${t.title}">${l}<span>${t.title}</span> ${t.sortable?`<span data-role="sort">${"ASC"===t.sortOrder?"▲":"▼"}</span>`:""}</th>`})),e+="</tr></thead>",e}},e={render:function(t,a){if(t){let l="<tbody>";return t.forEach(((t,s)=>{l+="<tr style='content-visibility:auto'>",t.forEach(((r,o)=>{if(this.edit_row===s&&this.edit_col==o)l+=`<td><input type="text" style="width:100%" autofocus  value="${r}" onchange="rk_table.updateData(this.value, ${s}, ${o})"></td>`,this.edit_row=null,this.edit_col=null;else{const s=a[o].template?e.resolveTemplate(a[o].template,t):r;l+=`<td>${s}</td>`}})),l+="</tr>"})),l+="</tbody>",l}},resolveTemplate:(t,e)=>{let a=t;return e.forEach(((t,l)=>{const s=new RegExp(`\\{${l}\\}`,"g");a=a.replace(s,e[l])})),a}},a=(t,e)=>{const a=t._tableData.header[e];"ASC"==a.sortOrder?t._tableData.body=t._tableData.body.sort(((t,a)=>t[e]<a[e]?1:-1)):t._tableData.body=t._tableData.body.sort(((t,a)=>t[e]>a[e]?1:-1)),a.sortOrder="ASC"===a.sortOrder?"DESC":"ASC",t.render(t._tableData)},l=t=>{var e;t.querySelectorAll("span").forEach((t=>{t.style.display="none"}));const a=t.querySelector("input");a.style.width="100%",a.style.height="100%",a.style.margin="0px",a.style.border="0.13em solid transparent",a.style.outlineColor="transparent",a.placeholder=(null!==(e=t.getAttribute("title"))&&void 0!==e?e:"")+" ..press ESC to cancel",a.style.display="block",a.focus()},s=(t,e)=>{e.querySelectorAll("span").forEach((t=>{t.style.display=""}));const a=e.querySelector("input");a.style.display="none",a.value="";const l=e.closest("table");t._tableData.body.forEach(((t,e)=>{l.rows[e+1].style.display=""}))},r=(t,e,a)=>{const l=e.querySelector("input").value,s=e.closest("table"),r=new RegExp(l,"gi");t._tableData.body.forEach(((t,e)=>{s.rows[e+1].style.display=t[a].match(r)?"":"none"}))};class o{constructor(o){this.render=a=>{this._tableData=a;const l=`<div class="${a.containerClass}"><table data-role="dtable" width="100%">\n                        ${t(a.header)} \n                        ${e.render(a.body,a.header)}\n        </table></div>`;this._element.innerHTML=l;let s=this._element.querySelector("thead");s.addEventListener("click",this._clickHandler),s.addEventListener("input",this._inputHandler),s.addEventListener("keyup",this._keyupHandler),s.closest("table").style.tableLayout="fixed"},this._clickHandler=t=>{const[e,s,r]=this._getMeta(t.target);if("TH"===(null==e?void 0:e.tagName))switch(s){case"sort":a(this,r);break;case"search":l(e)}},this._inputHandler=t=>{const[e,a,l]=this._getMeta(t.target);r(this,e,l)},this._keyupHandler=t=>{if("Escape"===t.key){const[e]=this._getMeta(t.target);s(this,e)}},this._getMeta=t=>{var e;const a=t.getAttribute("data-role"),l=t.closest("th"),s=parseInt(null!==(e=l.getAttribute("data-index"))&&void 0!==e?e:"-1");return[l,a,s]},this._element=document.querySelector(o)}}const n=new class{constructor(t){this._tableRenderer=new o(t)}get data(){return this._tableData}set data(t){this._tableData=t,this._tableRenderer.render(this._tableData)}set rows(t){this._tableData.body=t,this._tableRenderer.render(this._tableData)}}("#app");n.data={header:[{title:"Name",filterable:!0},{title:"Age",sortable:!0},{title:"Location",sortable:!0},{title:"EMail",template:'<a href="mailto:{3}">{3}</a>'},{title:"Telephone"},{title:"",template:"<button onclick=\"sayHello('Hi {0}')\">Action</button>"}],body:[["Name001",42,"Location390","abc@gmail.com","+91 011 568974","action data"],["Name002",42,"Location390","abc@gmail.com","+91 011 568974","action data"]],containerClass:"container"};let i=n.data.body;for(let t=0,e=500;t<e;t++)i.push([`Name00${t}`,t+5,"Location"+(500-t),"abc@gmail.com","+91 011 568974","action data"]);n.rows=i;
